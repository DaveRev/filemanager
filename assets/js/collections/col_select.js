(function(a){a(["underscore","collections/col_general"],function(a,b){function g(a,b){var c=a.length,d=b.length,e=0;if(c!==d)return!0;for(;e<c;e++)if(a[e]!==b[e])return!0;return!1}function f(a){a.set("selected",!1)}function e(){var a=c[this.cid];a.push((new Date).getTime())}var c={},d=b.prototype.constructor.prototype.add,h=b.extend({initialize:function(){this.cid="c"+a.uniqueId(),c[this.cid]=[]},record:function(){c[this.cid]=this.pluck("path")},comparator:function(a){return a.get("sorting")},getDiff:function(){var a=this.pluck("path");return g(c[this.cid],a)},add:function(b){var c=a.isArray(b),e=c?b.length:1,g=this.models.length+e,h;if(this.settings.limit!==undefined&&g>this.settings.limit){h=a.isArray(b)?a.pluck(b,"id"):b.id,c?setTimeout(function(){a.each(b,f)},0):setTimeout(function(){f(b)},0),this.trigger("selectionlimitexceed",h);return!1}return d.apply(this,arguments)},hasChanges:function(){return!!c[this.cid].length}});return h})})(this.define)