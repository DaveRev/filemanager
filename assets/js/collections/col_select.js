(function(a){a(["underscore","collections/col_general"],function(a,b){function f(a,b){var c=a.length,d=b.length,e=0;if(c!==d)return!0;for(;e<c;e++)if(a[e]!==b[e])return!0;return!1}function e(){var a=c[this.cid];a.push((new Date).getTime())}var c={},d=b.prototype.constructor.prototype.add,g=b.extend({initialize:function(){this.cid="c"+a.uniqueId(),c[this.cid]=[]},record:function(){c[this.cid]=this.pluck("path")},comparator:function(a){return a.get("sorting")},getDiff:function(){var a=this.pluck("path");return f(c[this.cid],a)},add:function(b){var c=a.isArray(b),e=c?b.length:1,f=this.models.length+e,g;if(this.settings.limit&&f>this.settings.limit){g=a.isArray(b)?a.pluck(b,"id"):b.id,c?a.each(b,function(a){a.set("selected",!1)}):b.set("selected",!1),this.trigger("selectionlimitexceed",g);return!1}return d.apply(this,arguments)},hasChanges:function(){return!!c[this.cid].length}});return g})})(this.define)