(function(a,b,c){typeof b=="function"&&b.amd?b(["jquery"],c):c(a.jQuery)})(this,this.define,function(a,b){a.extend(a.Deferred,{queue:function(){function e(){if(--c>0)return;window.setTimeout(a.proxy(b,"resolve"),0)}var b=a.Deferred(),c=0,d;return d=a.extend(b.promise(),{push:function(){if(this.isResolved()||this.isRejected())throw new Error("Can not add promises to a resolved or rejected promise queue");return c+=1,a.when.apply(null,arguments).then(e,a.proxy(b,"reject")),this}}),arguments.length&&d.push.apply(d,arguments),d}})})